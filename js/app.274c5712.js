(function(e){function t(t){for(var i,r,s=t[0],c=t[1],l=t[2],d=0,f=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&f.push(o[r][0]),o[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(f.length)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(i=!1)}i&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={app:0},a=[];function r(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"a8bda298"}[e]+".js"}function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=o[e]=[t,i]}));t.push(n[2]=i);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=r(e);var l=new Error;a=function(t){c.onerror=c.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",l.name="ChunkLoadError",l.type=i,l.request=a,n[1](l)}o[e]=void 0}};var d=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("85ec"),o=n.n(i);o.a},"042a":function(e,t,n){"use strict";var i=n("4273"),o=n.n(i);o.a},"1d23":function(e,t,n){},"2ade":function(e,t,n){"use strict";var i=n("1d23"),o=n.n(i);o.a},"3af8":function(e,t,n){"use strict";var i=n("bb6d"),o=n.n(i);o.a},"3c99":function(e,t,n){},"3cf9":function(e,t,n){},4273:function(e,t,n){},"4b88":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"GenericWindow",(function(){return L})),n.d(i,"ImageWindow",(function(){return V})),n.d(i,"PanelWindow",(function(){return Y})),n.d(i,"MarkdownWindow",(function(){return ae})),n.d(i,"LogWindow",(function(){return he})),n.d(i,"ImageCompareWindow",(function(){return xe})),n.d(i,"TerminalWindow",(function(){return De})),n.d(i,"JoyWindow",(function(){return Je})),n.d(i,"SchemaIOWindow",(function(){return et})),n.d(i,"TreeWindow",(function(){return ct}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],s=(n("034f"),n("2877")),c={},l=Object(s["a"])(c,a,r,!1,null,null,null),d=l.exports,u=n("9483");Object(u["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("d3b7");var f=n("8c4f"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"gridwindow",staticClass:"gridwindow noselect",on:{mouseup:function(t){e.show_overlay=!1},click:function(t){return e.unselectWindows(t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"lds-ellipsis"},[n("div"),n("div"),n("div"),n("div")]),e.show_overlay?n("div",{staticClass:"overlay",on:{mousemove:e.overlayMousemove,click:function(t){e.show_overlay=!1}}}):e._e(),e.wm&&e.gridWindows?n("grid-layout",{directives:[{name:"show",rawName:"v-show",value:!e.wm.selected_window&&e.gridWindows.length>0,expression:"!wm.selected_window && gridWindows.length > 0"}],ref:"window_grid",staticStyle:{"min-height":"100%"},attrs:{layout:e.gridWindows,"col-num":e.colNum,"is-mirrored":!1,"auto-size":!0,"row-height":e.rowHeight,"is-responsive":!0,"is-draggable":!0,"is-resizable":!0,"vertical-compact":e.verticalCompact,margin:[e.margin,e.margin],"use-css-transforms":!0},on:{"update:layout":function(t){e.gridWindows=t},"update:colNum":function(t){e.colNum=t},"update:col-num":function(t){e.colNum=t},"update:rowHeight":function(t){e.rowHeight=t},"update:row-height":function(t){e.rowHeight=t}}},e._l(e.gridWindows,(function(t){return n("grid-item",{directives:[{name:"show",rawName:"v-show",value:!t.hidden,expression:"!w.hidden"}],key:t.id,attrs:{"drag-allow-from":".drag-handle","drag-ignore-from":".no-drag",x:t.x,y:t.y,w:t.w,h:t.h,i:t.i},on:{"update:w":function(n){return e.$set(t,"w",n)},"update:h":function(n){return e.$set(t,"h",n)},resize:function(n){return e.viewChanging(t)},move:function(n){return e.viewChanging(t)},resized:function(n){e.show_overlay=!1,t.resize&&t.resize(),e.focusWindow(t)},moved:function(n){e.show_overlay=!1,t.move&&t.move(),e.focusWindow(t)}}},[n("window",{attrs:{w:t,withDragHandle:!0,loaders:e.wm.registered_loaders},on:{detach:e.detach,duplicate:e.duplicate,select:e.selectWindow,close:e.close,fullscreen:e.fullScreen,normalsize:e.normalSize,hide:e.hide}})],1)})),1):e._e(),e.gridWindows&&0!==e.gridWindows.length?e._e():n("div",{staticClass:"md-layout md-gutter md-alignment-center-center"},[n("md-empty-state",{attrs:{"md-icon":"https://imjoy.io/static/img/imjoy-io-icon.svg","md-label":"","md-description":""}})],1),e.wm?n("div",e._l(e.standaloneWindows,(function(t){return n("window",{directives:[{name:"show",rawName:"v-show",value:e.wm.selected_window===t&&!t.hidden,expression:"wm.selected_window === w && !w.hidden"}],key:t.id+"_standalone",attrs:{w:t,loaders:e.wm.registered_loaders,withDragHandle:!1},on:{detach:e.detach,duplicate:e.duplicate,select:e.selectWindow,close:e.close,fullscreen:e.fullScreen,normalsize:e.normalSize,hide:e.hide}})})),1):e._e()],1)},p=[],m=(n("4de4"),n("caad"),n("c975"),n("fb6a"),n("a434"),n("b0c0"),n("b64b"),n("2ca0"),n("96cf"),n("1da1")),w=n("53ca");n("25f0");function v(){return Math.random().toString(36).substr(2,10)}function g(e,t){if(!e){if(t=t||"Assertion failed","undefined"!==typeof Error)throw new Error(t);throw t}}var _=n("acad");function y(e){return b.apply(this,arguments)}function b(){return b=Object(m["a"])(regeneratorRuntime.mark((function e(t){var n,i,o,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.createWindow,i=t.updateConfig,e.next=3,window.imjoyLoader.loadImJoyRPC({api_version:"0.2.3"});case 3:return o=e.sent,e.next=6,o.setupRPC({name:"ImJoyGrid",version:"0.1.0",description:"A draggable, resizable grid container for ImJoy windows",type:"rpc-window"});case 6:return a=e.sent,r={setup:function(){a.log("ImJoyGrid loaded successfully.")},run:function(e){e.config&&i(e.config)},updateConfig:i,createWindow:n},a.export(r),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}var j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.w?n("md-card",[e.w.hide_title_bar&&"none"!==e.w.menu_button_location?n("div",{class:{"drag-handle":e.withDragHandle,"floating-upper-left":"upper-left"===e.w.menu_button_location,"floating-upper-right":"upper-right"===e.w.menu_button_location,"floating-lower-left":"lower-left"===e.w.menu_button_location,"floating-lower-right":"lower-right"===e.w.menu_button_location},staticStyle:{height:"20px",width:"20px"}},[n("md-menu",{staticClass:"floating-button",attrs:{"md-size":"big","md-direction":"bottom-end","md-active":e.options_menu_open},on:{"update:mdActive":function(t){e.options_menu_open=t},"update:md-active":function(t){e.options_menu_open=t}}},[n("md-button",{staticClass:"md-icon-button md-primary md-raised",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("more_horiz")])],1),n("md-menu-content",[n("md-menu-item",{on:{click:function(t){e.options_menu_open=!1}}},[n("md-icon",[e._v("highlight_off")]),n("span",[e._v("Cancel")])],1),!e.w.standalone&&e.w.fullscreen?n("md-menu-item",{on:{click:function(t){return e.normalSize(e.w)}}},[n("md-icon",[e._v("fullscreen")]),n("span",[e._v("Normal view")])],1):e.w.standalone?e._e():n("md-menu-item",{on:{click:function(t){return e.fullScreen(e.w)}}},[n("md-icon",[e._v("fullscreen")]),n("span",[e._v("Fullscreen")])],1),n("md-menu-item",{on:{click:function(t){return e.duplicate(e.w)}}},[n("md-icon",[e._v("filter")]),n("span",[e._v("Duplicate")])],1),n("md-menu-item",{on:{click:function(t){return e.close(e.w)}}},[n("md-icon",[e._v("close")]),n("span",[e._v("Close")])],1),n("md-menu-item",{on:{click:function(t){return e.printObject(e.w.type,e.w.data,e.w)}}},[n("md-icon",[e._v("bug_report")]),n("span",[e._v("Console.log")])],1),e._l(e.w.loaders,(function(t,i){return n("md-menu-item",{key:i,on:{click:function(n){e.loaders&&e.loaders[t](e.w.data)}}},[n("md-icon",[e._v("play_arrow")]),n("span",[e._v(e._s(i))])],1)}))],2)],1)],1):e.w.standalone?e._e():n("md-card-actions",{class:{"drag-handle":e.withDragHandle,"window-selected":e.w.selected,"window-header":!e.w.selected},attrs:{"md-alignment":"space-between"},nativeOn:{click:function(t){return e.selectWindow(e.w,t)},dblclick:function(t){e.w.fullscreen?e.normalSize(e.w):e.fullScreen(e.w)}}},[n("div",[n("md-button",{staticClass:"md-icon-button md-accent no-drag",on:{click:function(t){return e.close(e.w)}}},[n("md-icon",[e._v("close")]),n("md-tooltip",[e._v("Close window")])],1),e.w.fullscreen?e._e():n("md-button",{staticClass:"md-icon-button md-accent no-drag",on:{click:function(t){return e.fullScreen(e.w)}}},[n("md-icon",[e._v("fullscreen")]),n("md-tooltip",[e._v("Maximize window")])],1),e.w.fullscreen?n("md-button",{staticClass:"md-icon-button md-accent no-drag",on:{click:function(t){return e.normalSize(e.w)}}},[n("md-icon",[e._v("fullscreen_exit")]),n("md-tooltip",[e._v("Exit fullscreen")])],1):e._e()],1),n("div",{staticClass:"window-title noselect"},[e._v(" "+e._s(e.w.name.slice(0,30)+"(#"+(e.w.index||"")+")")+" ")]),n("div",{staticClass:"no-drag"},[n("md-menu",{attrs:{"md-size":"big","md-direction":"bottom-end","md-active":e.options_menu_open},on:{"update:mdActive":function(t){e.options_menu_open=t},"update:md-active":function(t){e.options_menu_open=t}}},[n("md-button",{staticClass:"md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("more_vert")])],1),n("md-menu-content",[n("md-menu-item",{on:{click:function(t){e.options_menu_open=!1}}},[n("md-icon",[e._v("highlight_off")]),n("span",[e._v("Cancel")])],1),!e.w.standalone&&e.w.fullscreen?n("md-menu-item",{on:{click:function(t){return e.normalSize(e.w)}}},[n("md-icon",[e._v("fullscreen")]),n("span",[e._v("Normal view")])],1):e.w.standalone?e._e():n("md-menu-item",{on:{click:function(t){return e.fullScreen(e.w)}}},[n("md-icon",[e._v("fullscreen")]),n("span",[e._v("Fullscreen")])],1),n("md-menu-item",{on:{click:function(t){return e.duplicate(e.w)}}},[n("md-icon",[e._v("filter")]),n("span",[e._v("Duplicate")])],1),n("md-menu-item",{on:{click:function(t){return e.close(e.w)}}},[n("md-icon",[e._v("close")]),n("span",[e._v("Close")])],1),n("md-menu-item",{on:{click:function(t){return e.printObject(e.w.type,e.w.data,e.w)}}},[n("md-icon",[e._v("bug_report")]),n("span",[e._v("Console.log")])],1),e._l(e.w.loaders,(function(t,i){return n("md-menu-item",{key:i,on:{click:function(n){e.loaders&&e.loaders[t](e.w.data)}}},[n("md-icon",[e._v("play_arrow")]),n("span",[e._v(e._s(i))])],1)}))],2)],1)],1)]),n("md-card-content",{staticClass:"plugin-iframe-container allow-scroll",class:e.w.standalone||e.w.hide_title_bar?"taller-container":"shorter-container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.w.loading,expression:"w.loading"}],staticClass:"loading loading-lg floating"}),e.componentNames[e.w.type]?n("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:e.w.window_id}}):e._e(),e.componentNames[e.w.type]&&e.w.type.startsWith("imjoy/")?n(e.componentNames[e.w.type],{ref:"window-content",tag:"component",attrs:{w:e.w,loaders:e.loaders},on:{init:e.setAPI}}):e.w.type.startsWith("imjoy/")?n("md-empty-state",{ref:"window-content",attrs:{"md-icon":"hourglass_empty","md-label":"IMJOY.IO","md-description":""}}):n("div",{staticClass:"plugin-iframe"},[n("div",{staticClass:"plugin-iframe",attrs:{id:e.w.window_id}})])],1)],1):e._e()},k=[],C=n("6dd8"),$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"generic-window"},[n("object-view-item",{class:[{"root-item":!0,dark:!1}],attrs:{data:e.w.data,maxDepth:e.maxDepth,depth:-1,path:"",canSelect:e.hasSelectedListener},on:{selected:e.itemSelected,openMenu:e.openMenu}})],1)},x=[],O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"object-view-item",class:[{"root-item":e.depth<1}]},[e.isFile(e.data)?n("div",{staticClass:"data-key can-select",staticStyle:{"justify-content":"space-between",display:"flex"},attrs:{role:e.canSelect?"button":void 0,tabindex:e.canSelect?"0":void 0},on:{click:function(t){return e.clickEvent(e.data)}}},[n("div",{staticStyle:{"line-height":"36px"}},[e.depth>0?n("span",{staticClass:"value-key"},[e._v(e._s(e.dataKey)+": ")]):e._e(),n("span",{style:e.getValueStyle(e.data)},[n("md-icon",[e._v("insert_drive_file")]),e._v(" "+e._s(e.data.name)+" ")],1)]),e.loaders?n("md-menu",[n("md-button",{staticClass:"md-icon-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("menu")])],1),n("md-menu-content",e._l(e.loaders,(function(t,i){return n("md-menu-item",{key:i,staticClass:"md-primary",on:{click:function(n){return t(e.data)}}},[e._v(" "+e._s(i)+" ")])})),1)],1):n("md-button",{staticClass:"md-primary md-icon-button",on:{click:function(t){return e.openMenu()}}},[n("md-icon",[e._v("menu")])],1)],1):"string"===typeof e.data&&e.data.startsWith("data:image/")?[n("div",{staticClass:"data-key",staticStyle:{"justify-content":"space-between",display:"flex"}},[n("div",{on:{click:function(t){return t.stopPropagation(),e.toggleOpen(t)}}},[n("div",{class:e.classes}),n("md-icon",[e._v("image")]),e._v(" "+e._s(e.dataKey)+" "),n("span",{staticClass:"properties"},[e._v(e._s(e.lengthString))])],1),n("md-button",{staticClass:"md-primary md-icon-button",on:{click:function(t){return e.openMenu()}}},[n("md-icon",[e._v("menu")])],1)],1),e.open?n("md-card",[n("md-card-content",[n("div",{staticClass:"fill-container"},[n("img",{staticStyle:{height:"100%",width:"100%","object-fit":"contain"},attrs:{src:e.data}})])])],1):e._e()]:"object"===typeof e.data||"array"===typeof e.data?n("div",[e.dataKey?n("div",{staticClass:"data-key",attrs:{"aria-expanded":e.open?"true":"false"}},[n("div",{on:{click:function(t){t.stopPropagation(),e.dataLength>0&&e.toggleOpen()}}},[n("div",{class:e.classes}),e._v(" "+e._s(e.dataKey)+" "),n("span",{staticClass:"properties"},[e._v(e._s(e.lengthString))])]),n("md-button",{staticClass:"md-primary md-icon-button",on:{click:function(t){return e.openMenu()}}},[n("md-icon",[e._v("menu")])],1)],1):e._e(),e._l(e.dataValues,(function(t,i){return[e.open?n("object-view-item",{key:i,attrs:{dataKey:i,data:t,path:e.path+"."+i,maxDepth:e.maxDepth,depth:e.depth+1,canSelect:e.canSelect},on:{selected:e.bubbleSelected,openMenu:e.openMenu}}):e._e()]})),e.open&&e.dataLength>e.maxLength?n("div",{staticClass:"data-key",staticStyle:{"margin-left":"32px"},on:{click:function(t){return e.loadMore()}}},[e._v(" + more items ")]):e._e()],2):n("div",{staticClass:"data-key can-select",attrs:{role:e.canSelect?"button":void 0,tabindex:e.canSelect?"0":void 0},on:{click:function(t){return e.clickEvent(e.data)}}},[n("div",[n("span",{staticClass:"value-key"},[e._v(e._s(e.dataKey)+": ")]),n("span",{style:e.getValueStyle(e.data)},[e._v(" "+e._s(e.data)+" ")])])])],2)},S=[],W=(n("a9e3"),n("4fad"),n("c1f9"),n("3410"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array)).constructor),A=o["default"].extend({name:"object-view-item",data:function(){return{open:this.depth<this.maxDepth,maxLength:100,loaders:null}},props:{path:{required:!0,type:String},depth:{required:!0,type:Number},dataKey:{type:[String,Number],default:null},data:{required:!0},maxDepth:{type:Number,required:!1,default:1},canSelect:{type:Boolean,required:!1,default:!1}},methods:{isFile:function(e){return e instanceof File},loadMore:function(){this.maxLength=2*this.maxLength},toggleOpen:function(){this.open=!this.open},setLoaders:function(e){this.loaders=e,this.$forceUpdate()},openMenu:function(e){e?this.$emit("openMenu",e):this.$emit("openMenu",{target:this,data:this.data})},clickEvent:function(e){this.$emit("selected",{key:this.dataKey,value:e,path:this.path})},bubbleSelected:function(e){this.$emit("selected",e)},getValueStyle:function(e){var t=Object(w["a"])(e);switch(t){case"string":return{color:"var(--vjc-string-color)"};case"number":return{color:"var(--vjc-number-color)"};case"boolean":return{color:"var(--vjc-boolean-color)"};case"object":return{color:"var(--vjc-null-color)"};case"undefined":return{color:"var(--vjc-null-color)"};default:return{color:"var(--vjc-valueKey-color)"}}}},computed:{dataValues:function(){return Array.isArray(this.data)||this.data instanceof W?this.data.slice(0,this.maxLength):Object.fromEntries(Object.entries(this.data).slice(0,this.maxLength))},dataLength:function(){return Array.isArray(this.data)?this.data.length:Object.keys(this.data).length},classes:function(){return{"chevron-arrow":!0,opened:this.open}},lengthString:function(){if(Array.isArray(this.data))return 1===this.data.length?this.data.length+" element, array":this.data.length+" elements, array";if(this.data instanceof W)return 1===this.data.length?this.data.length+" element, typedArray":this.data.length+" elements, typedArray";var e=Object.keys(this.data).length;return 1===e?e+" property":e+" properties"},dataValue:function(){return"undefined"===typeof this.data?"undefined":JSON.stringify(this.data)}}}),z=A,T=(n("82e1"),Object(s["a"])(z,O,S,!1,null,"ef2960aa",null)),N=T.exports;o["default"].component("object-view-item",N);var P={name:"generic-window",type:"imjoy/generic",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{colorScheme:"light",maxDepth:1,rootKey:"__root__"}},mounted:function(){this.$emit("init")},computed:{hasSelectedListener:function(){return Boolean(this.$listeners&&this.$listeners.selected)}},methods:{openMenu:function(e){var t=this.w.getDataLoaders(e.data);e.target&&e.target.setLoaders(t)},isObject:function(e){return"object"===Object(w["a"])(e)&&null!==e&&!this.isArray(e)},isArray:function(e){return Array.isArray(e)},itemSelected:function(e){console.log(e)}}},E=P,M=(n("3af8"),Object(s["a"])(E,$,x,!1,null,"1650bcb3",null)),L=M.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fill-container"},[e.w.data&&e.w.data.src?n("img",{staticStyle:{height:"100%",width:"100%","object-fit":"contain"},attrs:{src:e.w.data.src}}):n("p",[e._v("No image available for display.")])])},R=[],I={name:"image-window",type:"imjoy/image",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){this.$emit("init")}},H=I,U=(n("869f"),Object(s["a"])(H,D,R,!1,null,"ded72a86",null)),V=U.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("joy",{attrs:{config:e.w.config}})},K=[],q={name:"panel-window",type:"imjoy/panel",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){this.$emit("init")}},B=q,F=Object(s["a"])(B,J,K,!1,null,"7350ad23",null),Y=F.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.plugin_info?n("md-card",[e.plugin_info.cover&&"string"===typeof e.plugin_info.cover?n("md-card-media",{attrs:{"md-ratio":"16:9"}},[n("img",{attrs:{src:e.plugin_info.cover,alt:"plugin-cover"}})]):e.plugin_info.cover?n("div",{staticClass:"carousel"},[e._l(e.plugin_info.cover,(function(e,t){return n("input",{key:t,staticClass:"carousel-locator",attrs:{id:"slide-"+t,type:"radio",name:"carousel-radio",hidden:""}})})),n("div",{staticClass:"carousel-container"},e._l(e.plugin_info.cover,(function(e,t){return n("figure",{key:t,staticClass:"carousel-item"},[n("img",{staticClass:"img-responsive rounded",attrs:{src:e,alt:"plugin cover"}})])})),0),n("div",{staticClass:"carousel-nav"},e._l(e.plugin_info.cover,(function(t,i){return n("label",{key:i,staticClass:"nav-item text-hide c-hand",attrs:{for:"slide-"+i}},[e._v(e._s(i))])})),0)],2):e._e(),n("md-card-header",[n("md-toolbar",{attrs:{"md-elevation":"0"}},[n("div",[n("h2",[n("plugin-icon",{attrs:{icon:e.plugin_info.icon}}),e._v(" "+e._s(e.plugin_info.name+" "+e.plugin_info.badges)+" ")],1)]),n("div",{staticClass:"md-toolbar-section-end"},[n("p",[e._v("version:"+e._s(e.plugin_info.version))])])])],1),n("md-card-content",[e.w.data&&e.w.data.source&&""!=e.w.data.source.trim()?n("div",{staticStyle:{"padding-left":"10px","padding-right":"5px",overflow:"auto"},domProps:{innerHTML:e._s(e.sanitizedMarked(e.w.data.source))}}):n("h4",[e._v(" "+e._s(e.plugin_info&&e.plugin_info.description)+" "),n("br"),e._v(" This plugin has no documentation! ")])])],1):e._e()],1)},Q=[],X=(n("ac1f"),n("5319"),n("9911"),n("e0c1")),Z=n.n(X),ee=n("c0c4"),te=n.n(ee),ne={name:"markdown-window",type:"imjoy/markdown",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{plugin_info:null}},created:function(){var e=new Z.a.Renderer;e.link=function(e,t,n){var i=Z.a.Renderer.prototype.link.call(this,e,t,n);return i.replace("<a","<a target='_blank' ")},Z.a.setOptions({renderer:e}),te.a.addHook("afterSanitizeAttributes",(function(e){"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))})),this.sanitizedMarked=function(e){return te.a.sanitize(Z()(e))}},mounted:function(){this.plugin_info=this.w&&this.w.data&&this.w.data.plugin_info,this.$emit("init")}},ie=ne,oe=(n("fecf"),Object(s["a"])(ie,G,Q,!1,null,"de3cbcec",null)),ae=oe.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"log-content"},[n("ul",e._l(e.log_history,(function(t,i){return n("li",{key:i},["image"===t.type?n("img",{attrs:{src:t.value}}):n("p",{class:"error"===t.type?"error":"info"},[e._v(" "+e._s(t.value||t)+" ")])])})),0),e.log_history&&e.log_history.length>0?n("md-button",{staticClass:"md-mini",on:{click:function(t){return e.clearLog()}}},[n("md-icon",[e._v("clear")]),e._v("Clear ")],1):e._e(),e.log_history&&e.log_history.length>0?n("md-button",{staticClass:"md-mini",on:{click:function(t){return e.exportLog()}}},[n("md-icon",[e._v("cloud_download")]),e._v("Export ")],1):n("p",[e._v(" No log available. ")])],1)},se=[],ce=n("b85c"),le=n("2440"),de={name:"log-window",type:"imjoy/log",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{log_history:null}},mounted:function(){this.event_bus=this.$root.$data.store&&this.$root.$data.store.event_bus,this.event_bus&&this.event_bus.on("plugin_loaded",this.fetchLog),this.log_history=this.w.data.log_history,this.plugin_id=this.w.data.plugin_id,this.plugin_name=this.w.data.plugin_name,this.$emit("init")},beforeDestroy:function(){this.event_bus&&this.event_bus.off("plugin_loaded",this.fetchLog)},methods:{fetchLog:function(e){e.name==this.w.data.plugin_name&&(this.log_history=e._log_history,this.plugin_id=e.id,this.plugin_name=e.name),this.$forceUpdate()},clearLog:function(){var e=this.log_history;e.splice(0,e.length),e._error="",e._info="",this.$forceUpdate()},exportLog:function(){var e,t=this.log_history,n=this.plugin_id||this.plugin_name+"_log.txt",i="",o=Object(ce["a"])(t);try{for(o.s();!(e=o.n()).done;){var a=e.value;i=a.type+":"+i+a.value+"\n"}}catch(s){o.e(s)}finally{o.f()}var r=new Blob([i],{type:"text/plain;charset=utf-8"});Object(le["saveAs"])(r,n)}}},ue=de,fe=(n("042a"),Object(s["a"])(ue,re,se,!1,null,"0d4fb87e",null)),he=fe.exports,pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.w.data&&e.w.data.first&&e.w.data.second?n("comparify",{ref:"compare",staticClass:"bg-white h-64 w-full",attrs:{value:e.w.data.offset||50}},[n("img",{staticClass:"h-64 object-fit-first h-full w-full",attrs:{slot:"first",src:e.w.data.first,alt:""},slot:"first"}),n("img",{staticClass:"object-fit-second h-full w-full",attrs:{slot:"second",src:e.w.data.second,alt:""},slot:"second"})]):n("p",[e._v("No image available for display.")])},me=[],we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"compare-wrapper"},[n("div",{staticClass:"compare"},[n("div",{staticClass:"compare__content",style:{width:e.width}},[e._t("first")],2),n("div",{staticClass:"handle-wrap",style:{left:"calc("+e.compareWidth+"% - var(--handle-line-width) / 2 "}},[n("div",{staticClass:"handle"},[n("svg",{staticClass:"handle__arrow handle__arrow--l feather feather-chevron-left",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[n("polyline",{attrs:{points:"15 18 9 12 15 6"}})]),n("svg",{staticClass:"handle__arrow handle__arrow--r feather feather-chevron-right",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[n("polyline",{attrs:{points:"9 18 15 12 9 6"}})])]),n("span",{staticClass:"handle-line"})]),n("div",{staticClass:"compare-overlay ",style:{width:"calc("+e.compareWidth+"%)"}},[n("div",{staticClass:"compare-overlay__content",style:{width:e.width}},[e._t("second")],2)])]),n("input",{staticClass:"compare__range",attrs:{type:"range",min:"0",max:"100",step:e.step,tabindex:"-1"},domProps:{value:e.compareWidth},on:{input:e.handleInput}})])},ve=[],ge={name:"comparify",props:{value:{default:50},step:{default:".1"}},data:function(){return{width:null,compareWidth:this.value}},watch:{value:function(){this.compareWidth=this.value}},mounted:function(){var e=this;this.$nextTick((function(){e.handleResize()})),this.$emit("init")},methods:{handleInput:function(e){this.compareWidth=e.target.value,this.$emit("input",e.target.value)},handleResize:function(){var e=this.getContainerWidth();e!==this.width&&(this.width=e)},getContainerWidth:function(){return window.getComputedStyle(this.$el,null).getPropertyValue("width")}}},_e=ge,ye=(n("f77d"),Object(s["a"])(_e,we,ve,!1,null,null,null)),be=ye.exports,je=n("5118"),ke={name:"image-compare-window",type:"imjoy/image-compare",components:{Comparify:be},props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){var e=this;this.w.api.on("resize",(function(){Object(je["setTimeout"])((function(){e.$refs.compare&&e.$refs.compare.handleResize()}),0)})),this.w.api.on("refresh",(function(){Object(je["setTimeout"])((function(){e.$refs.compare&&e.$refs.compare.handleResize()}),0)})),this.$emit("init")}},Ce=ke,$e=(n("a8fe"),Object(s["a"])(Ce,pe,me,!1,null,"44ee4754",null)),xe=$e.exports,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"terminal-window"},[e._l(this.buttons||[],(function(t){return n("md-button",{key:t.event_id,on:{click:function(n){return e.button_click(t)}}},[t.icon?n("md-icon",[e._v(e._s(t.icon))]):e._e(),e._v(" "+e._s(t.label)+" ")],1)})),n("div",{ref:"terminal_container",staticClass:"terminal-container",style:{height:e.window_height}})],2)},Se=[],We=n("59bf"),Ae=(n("7449"),n("941b")),ze=n("c554"),Te=n("95db"),Ne=n("6a49");function Pe(e,t){var n;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var r=this;clearTimeout(n),n=setTimeout((function(){return e.apply(r,o)}),t)}}var Ee={name:"terminal-window",type:"imjoy/terminal",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{error:!1,window_height:"500px",buttons:[]}},created:function(){},mounted:function(){var e=this;We["Terminal"].applyAddon(Ae),We["Terminal"].applyAddon(ze),We["Terminal"].applyAddon(Te),We["Terminal"].applyAddon(Ne);var t=new We["Terminal"]({cursorBlink:!0,macOptionIsMeta:!0,scrollback:!0});t.open(this.$refs.terminal_container),this.term=t,this.$nextTick((function(){e.fitToscreen()})),this.w.api.on("write",(function(t){e.term.write(t)})),this.w.api.on("error",(function(t){e.error=t})),this.term.on("key",(function(t){e.w.api.emit("key",t)})),this.term.on("paste",(function(t){e.w.api.emit("paste",t)})),this.term.focus(),this.w.api.on("show_buttons",(function(t){e.buttons=t,e.$forceUpdate()}));var n=50,i=Pe(this.fitToscreen,n);window.addEventListener("resize",i),document.addEventListener("orientationchange",i),this.w.api.on("resize",i),this.w.api.on("refresh",i),this.buttons=this.w.data.buttons||[],this.$emit("init")},beforeDestroy:function(){},methods:{fitToscreen:function(){var e=this;this.window_height=this.$el.clientHeight+"px",this.$forceUpdate(),this.$nextTick((function(){e.term.focus(),e.term.fit(),e.w.api.emit("fit",{cols:e.term.cols,rows:e.term.rows}),e.$forceUpdate()}))},button_click:function(e){this.w.api.emit("button_clicked",e)}}},Me=Ee,Le=(n("2ade"),Object(s["a"])(Me,Oe,Se,!1,null,"264cf1d1",null)),De=Le.exports,Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"joy-window"},[e.plugin_dialog_config?n("joy",{ref:"plugin_dialog_joy",attrs:{config:e.plugin_dialog_config,showHeader:!1,controlButtons:!1}}):e._e(),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(t){return e.w.ok()}}},[e._v("OK")]),n("md-button",{staticClass:"md-accent",on:{click:function(t){return e.w.cancel()}}},[e._v("Cancel")])],1)],1)},Ie=[],He={name:"joy-window",type:"imjoy/joy",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{plugin_dialog_config:null}},mounted:function(){var e=this;this.w&&(this.plugin_dialog_config=this.w,this.w.get_config=function(){return e.$refs.plugin_dialog_joy.joy.get_config()}),this.$emit("init")},methods:{getConfig:function(){}}},Ue=He,Ve=Object(s["a"])(Ue,Re,Ie,!1,null,null,null),Je=Ve.exports,Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"schema-io"},e._l(e.ioPanels,(function(t){return n("div",{key:t.id},["form"===t.type?[t.title?n("div",{staticClass:"panel-heading"},[e._v(e._s(t.title))]):e._e(),t.description?n("div",{staticStyle:{"padding-left":"1px","padding-right":"1px","padding-bottom":"10px",overflow:"auto"},domProps:{innerHTML:e._s(e.sanitizedMarked(t.description))}}):e._e(),n("vue-form-generator",{attrs:{schema:t.schema,model:t.data,options:t.options}}),e._l(t.buttons,(function(i){return n("md-button",{key:i.label,class:i.class,on:{click:function(n){return e.onSubmit(n,i.event_id,t.data)}}},[e._v(" "+e._s(i.label)+" ")])}))]:e._e(),"vega"===t.type?[t.title?n("div",{staticClass:"panel-heading"},[e._v(e._s(t.title))]):e._e(),n("div",{staticClass:"overflow-auto"},[t.description?n("div",{staticStyle:{"padding-left":"1px","padding-right":"1px","padding-bottom":"10px",overflow:"auto"},domProps:{innerHTML:e._s(e.sanitizedMarked(t.description))}}):e._e(),n("vega",{ref:t.id,refInFor:!0,attrs:{schema:t.schema,options:t.options}}),n("br"),e._l(t.buttons,(function(i){return n("md-button",{key:i.label,class:i.class,on:{click:function(n){return e.onSubmit(n,i.event_id,t.data)}}},[e._v(" "+e._s(i.label)+" ")])}))],2)]:e._e()],2)})),0)},qe=[],Be=n("4309"),Fe=n.n(Be),Ye=(n("92bd"),n("e1a1")),Ge=n("87e7");o["default"].use(Fe.a),o["default"].component("vega",{props:["schema","options"],mounted:function(){var e=this;Object(Ge["a"])(this.$el,this.schema,this.options||{actions:!1}).then((function(t){e.embed=t,e.view=t.view}))},data:function(){return{view:null,embed:null}},methods:{updateView:function(e,t){var n=Ye["changeset"]().insert(t);this.view.change(e,n).run()}},template:"<div></div>"});var Qe={name:"schema-io-window",type:"imjoy/schema-io",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{ioPanels:[]}},mounted:function(){if(this.w.data)if(Array.isArray(this.w.data)){var e,t=Object(ce["a"])(this.w.data);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.ioPanels.push(n)}}catch(i){t.e(i)}finally{t.f()}}else this.ioPanels.push(this.w.data);this.$emit("init",{append:this.append,remove:this.remove,appendDataPoint:this.appendDataPoint,getData:this.getData})},created:function(){var e=new Z.a.Renderer;e.link=function(e,t,n){var i=Z.a.Renderer.prototype.link.call(this,e,t,n);return i.replace("<a","<a target='_blank' ")},Z.a.setOptions({renderer:e}),te.a.addHook("afterSanitizeAttributes",(function(e){"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))})),te.a.addHook("afterSanitizeAttributes",(function(e){"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))})),this.sanitizedMarked=function(e){return te.a.sanitize(Z()(e))}},methods:{onSubmit:function(e,t,n){var i=this;return Object(m["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:e.preventDefault(),i.w.api.emit(t,n);case 2:case"end":return o.stop()}}),o)})))()},append:function(e){if(Array.isArray(e)){var t,n=Object(ce["a"])(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.ioPanels.push(i)}}catch(o){n.e(o)}finally{n.f()}}else this.ioPanels.push(e)},remove:function(e){var t=this;this.ioPanels.filter((function(n,i){n.id===e&&t.ioPanels.splice(i,1)}))},appendDataPoint:function(e,t,n){this.$refs[e][0].updateView(t,n)},getData:function(e){if(e)return this.ioPanels[e].data;var t={};for(var n in this.ioPanels)t[n]=this.ioPanels[n].data;return t}}},Xe=Qe,Ze=(n("77b0"),Object(s["a"])(Xe,Ke,qe,!1,null,null,null)),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tree-window"},[e.w.config.name?n("p",{staticStyle:{"text-align":"center",margin:"2px"}},[e._v(" "+e._s(e.w.config.name)+" ")]):e._e(),n("sl-vue-tree",{ref:"slVueTree",attrs:{"allow-multiselect":e.allowMultiselect},on:{select:e.nodeSelected,drop:e.nodeDropped,toggle:e.nodeToggled,nodedblclick:e.nodeDbClick},scopedSlots:e._u([{key:"title",fn:function(t){var i=t.node;return[n("span",{staticClass:"item-icon"},[i.isLeaf?n("md-icon",{staticClass:"small-icon"},[e._v("insert_drive_file")]):n("md-icon",{staticClass:"small-icon"},[e._v("folder_open")])],1),e._v(" "+e._s(i.title)+" ")]}},{key:"toggle",fn:function(t){var i=t.node;return[i.isLeaf?e._e():n("span",[i.isExpanded?n("md-icon",{staticClass:"small-icon"},[e._v("expand_more")]):n("md-icon",{staticClass:"small-icon"},[e._v("chevron_right")])],1)]}}]),model:{value:e.w.config.nodes,callback:function(t){e.$set(e.w.config,"nodes",t)},expression:"w.config.nodes"}},[n("template",{slot:"draginfo"},[e._v(" "+e._s(e.selectedNodesTitle)+" ")])],2)],1)},nt=[],it=(n("99af"),n("a15b"),n("d81d"),n("4b88"),n("c536")),ot=n.n(it),at={name:"tree-window",type:"imjoy/tree",components:{SlVueTree:ot.a},props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{lastEvent:"No last event",selectedNodesTitle:"",allowMultiselect:!1}},created:function(){this.w.config.allow_multi_select=this.allowMultiselect},mounted:function(){var e=this,t={_rintf:!0,getNodes:function(){return e.config.nodes},clearNodes:function(){e.config.nodes=[],e.$forceUpdate()},setNodes:function(t){e.config.nodes=t,e.$forceUpdate()}};this.$emit("init",t)},methods:{toggleVisibility:function(e,t){var n=this.$refs.slVueTree;e.stopPropagation();var i=!t.data||!1!==t.data.visible;n.updateNode(t.path,{data:{visible:!i}}),this.lastEvent="Node ".concat(t.title," is ").concat(i?"visible":"invisible"," now")},nodeSelected:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.selectedNodesTitle=e.map((function(e){return e.title})).join(", "),t.lastEvent="Select nodes: ".concat(t.selectedNodesTitle),!t.w.config.node_select_callback){n.next=10;break}return n.prev=3,t.$emit("loading",!0),n.next=7,t.w.config.node_select_callback(e);case 7:return n.prev=7,t.$emit("loading",!1),n.finish(7);case 10:case"end":return n.stop()}}),n,null,[[3,,7,10]])})))()},nodeToggled:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.lastEvent="Node ".concat(e.title," is ").concat(e.isExpanded?"expanded":"collapsed"),!t.w.config.node_toggle_callback){n.next=9;break}return n.prev=2,t.$emit("loading",!0),n.next=6,t.w.config.node_toggle_callback(e);case 6:return n.prev=6,t.$emit("loading",!1),n.finish(6);case 9:case"end":return n.stop()}}),n,null,[[2,,6,9]])})))()},nodeDbClick:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.w.config.node_dbclick_callback){n.next=8;break}return n.prev=1,t.$emit("loading",!0),n.next=5,t.w.config.node_dbclick_callback(e);case 5:return n.prev=5,t.$emit("loading",!1),n.finish(5);case 8:case"end":return n.stop()}}),n,null,[[1,,5,8]])})))()},nodeDropped:function(e,t){var n=this;return Object(m["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n.lastEvent="Nodes: ".concat(e.map((function(e){return e.title})).join(", ")," are dropped ").concat(t.placement," ").concat(t.node.title),!n.w.config.node_drop_callback){i.next=9;break}return i.prev=2,n.$emit("loading",!0),i.next=6,n.w.config.node_drop_callback(e,t);case 6:return i.prev=6,n.$emit("loading",!1),i.finish(6);case 9:case"end":return i.stop()}}),i,null,[[2,,6,9]])})))()}}},rt=at,st=(n("e213"),Object(s["a"])(rt,tt,nt,!1,null,null,null)),ct=st.exports,lt={};for(var dt in i)lt[i[dt].name]=i[dt];var ut={name:"window",components:lt,props:{w:{type:Object,default:function(){return null}},withDragHandle:{type:Boolean,default:function(){return!1}},loaders:{type:Object,default:function(){return null}}},data:function(){return{componentNames:{},options_menu_open:!1}},created:function(){for(var e in lt)this.componentNames[lt[e].type]=lt[e].name},mounted:function(){var e=this;this.w&&(this.w.menu_button_location=this.w.menu_button_location||"upper-left",this.w.$el=this.$el,this.w.api.on("refresh",(function(){e.refresh()})),this.w.api.on("focus",(function(){e.w.hidden&&(e.w.hidden=!1,e.w.w=e.w.__w,e.w.h=e.w.__h),e.selectWindow(e.w,{}),e.w.standalone?e.w.api.show():e.$nextTick((function(){e.$el.scrollIntoView(!0)}))})),this.w.fullscreen&&this.fullScreen(this.w));var t=new C["a"]((function(t){e.w.api.emit("resize",t[0].contentRect)}));t.observe(this.$el),setTimeout((function(){if(e.$refs["window-content"]){var t=e.$refs["window-content"],n=new C["a"]((function(){setTimeout((function(){t.$el&&e.w.api.emit("window_size_changed",t.$el.getBoundingClientRect())}),500)}));n.observe(t.$el)}}),100)},beforeDestroy:function(){this.w.closed=!0},watch:{w:function(){var e=this;this.w.api.on("refresh",(function(){e.refresh()})),this.w.api.on("focus",(function(){e.w.standalone||e.$nextTick((function(){e.$el.scrollIntoView(!0)}))})),this.w.api.on("fullscreen",(function(){e.fullScreen(e.w)})),this.w.standalone||this.$nextTick((function(){e.$el.scrollIntoView(!0)})),this.w.fullscreen&&this.fullScreen(this.w)}},methods:{setAPI:function(e){this.w.api=this.w.api||{};for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];this.w.api[i]=e[i]}this.w.api.emit("ready")},refresh:function(){this.$forceUpdate()},hide:function(e){this.$emit("hide",e)},close:function(e){this.$emit("close",e)},fullScreen:function(e){var t=this;this.$emit("fullscreen",e),this.$nextTick((function(){t.$forceUpdate()}))},detach:function(e){this.$emit("detach",e)},normalSize:function(e){var t=this;this.$emit("normalsize",e),this.$nextTick((function(){t.$forceUpdate()}))},duplicate:function(e){this.$emit("duplicate",e)},selectWindow:function(e,t){this.$emit("select",e,t)},printObject:function(e,t,n){console.log(e,t,n)}}},ft=ut,ht=(n("efc7"),Object(s["a"])(ft,j,k,!1,null,"560d0986",null)),pt=ht.exports,mt={name:"grid-window",components:{window:pt},props:{mode:{type:String,default:function(){return"grid"}}},data:function(){return{rowHeight:30,columnWidth:30,colNum:20,active_windows:[],show_overlay:!1,scrolling:!1,scrollClientY:0,screenWidth:window.innerWidth,windows:[],selected_workspace:"default",imjoy:null,wm:null,verticalCompact:!0,margin:3,loading:!1}},created:function(){var e=this,t=this;window.self!==window.top?(this.loading=!0,y({createWindow:function(e){return t.imjoy.pm.createWindow(null,e)},updateConfig:this.updateConfig}).then((function(n){for(var i={},o=function(){var e=r[a];if(["export","registerCodec","dispose"].includes(e))return"continue";if("function"===typeof n[e])i[e]=function(){return n[e].apply(this,Array.prototype.slice(arguments).slice(1))};else if("object"===Object(w["a"])(n[e])){i[e]={};for(var t=function(){var t=s[o];"function"===typeof n[e][t]?i[e][t]=function(){return n[e][t].apply(this,Array.prototype.slice(arguments).slice(1))}:i[e][t]=n[e][t]},o=0,s=Object.keys(n[e]);o<s.length;o++)t()}else i[e]=n[e]},a=0,r=Object.keys(n);a<r.length;a++)o();i._rintf=!0,t.imjoy=new _["ImJoy"]({imjoy_api:i}),t.imjoy.start().then((function(){e.wm=t.imjoy.wm,e.windows=e.wm&&e.wm.windows,g(e.windows),e.event_bus=e.wm.event_bus,e.event_bus.on("add_window",e.onWindowAdd),e.event_bus.on("close_window",e.onWindowClose),e.event_bus.on("resize",e.updateSize)}))})).finally((function(){e.loading=!1}))):(t.imjoy=new _["ImJoy"]({imjoy_api:{createWindow:function(e,n){return n.src&&n.src.startsWith("https://grid.imjoy.io")?(t.updateConfig(n.config),{_rintf:!0,createWindow:function(n){return t.imjoy.pm.createWindow(e,n)},updateConfig:t.updateConfig}):t.imjoy.pm.createWindow(e,n)},showDialog:function(e,n){return t.imjoy.pm.createWindow(e,n)}}}),t.imjoy.start().then(Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.wm=t.imjoy.wm,e.windows=e.wm&&e.wm.windows,g(e.windows),e.event_bus=e.wm.event_bus,e.event_bus.on("add_window",e.onWindowAdd),e.event_bus.on("close_window",e.onWindowClose),e.event_bus.on("resize",e.updateSize),n.next=9,t.imjoy.pm.reloadPluginRecursively({uri:"https://imjoy-team.github.io/jupyter-engine-manager/Jupyter-Engine-Manager.imjoy.html"});case 9:e.loadPluginByQuery();case 10:case"end":return n.stop()}}),n)})))))},mounted:function(){this.screenWidth=window.innerWidth,this.colNum=parseInt(this.$refs.gridwindow.clientWidth/this.columnWidth),window.onbeforeunload=function(e){var t="Are you sure you want to leave?";return"undefined"==typeof e&&(e=window.event),e&&(e.returnValue=t),t}},beforeDestroy:function(){this.event_bus.off("add_window",this.onWindowAdd),this.event_bus.off("close_window",this.onWindowClose),this.event_bus.off("resize",this.updateSize)},computed:{gridWindows:function(){var e=this;return this.windows.filter((function(t){return!t.dialog&&!t.standalone&&"grid"===e.mode}))},standaloneWindows:function(){return this.windows.filter(this.isStandaloneWindow)}},methods:{loadPlugin:function(e){var t=this;(e||(e=prompt("Please type a ImJoy plugin URL","https://github.com/imjoy-team/imjoy-plugins/blob/master/repository/ImageAnnotator.imjoy.html"),e))&&(this.loading=!0,this.imjoy.pm.reloadPluginRecursively({uri:e}).then(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loading=!0,e.prev=1,!n.api.run){e.next=5;break}return e.next=5,n.api.run({config:{},data:{}});case 5:t.imjoy.pm.imjoy_api.showMessage(null,"Plugin ".concat(n.name," successfully loaded, you can now run it from the ImJoy plugin menu."));case 6:return e.prev=6,t.loading=!1,e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[1,,6,9]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),t.imjoy.pm.imjoy_api.showMessage(null,"Failed to load the plugin, error: ".concat(e))})))},loadPluginByQuery:function(){if(this.$route.query.plugin||this.$route.query.p){var e=this.$route.query.plugin||this.$route.query.p;this.loadPlugin(e)}},updateConfig:function(e){void 0!==e.colNum&&(this.colNum=e.colNum),void 0!==e.rowHeight&&(this.rowHeight=e.rowHeight),void 0!==e.verticalCompact&&(this.verticalCompact=e.verticalCompact),void 0!==e.margin&&(this.margin=e.margin),this.$forceUpdate()},isStandaloneWindow:function(e){return!e.dialog&&("grid"!==this.mode||e.standalone)},overlayMousemove:function(e){var t,n=this,i=this.$refs.gridwindow.getBoundingClientRect(),o=i.y,a=i.y+i.height;this.scrollClientY=e.clientY,this.scrollClientY<o+10?(t=function(){n.$refs.gridwindow.scrollTop=n.$refs.gridwindow.scrollTop-(o-n.scrollClientY)/2,n.show_overlay&&n.scrollClientY<o?(n.scrolling=!0,window.requestAnimationFrame(t)):n.scrolling=!1},this.scrolling||t()):this.scrollClientY>a-20&&(t=function(){n.$refs.gridwindow.scrollTop=n.$refs.gridwindow.scrollTop+(n.scrollClientY-a+20)/2,n.show_overlay&&n.scrollClientY>a-10?(n.scrolling=!0,window.requestAnimationFrame(t)):n.scrolling=!1},this.scrolling||t())},updateSize:function(e){this.screenWidth=e.width,this.colNum=parseInt(this.$refs.gridwindow.clientWidth/this.columnWidth)},onWindowAdd:function(e){e.fullscreen&&this.fullScreen(e),this.selectWindow(e,{}),this.$forceUpdate()},onWindowClose:function(){this.$forceUpdate()},detach:function(e){var t=this;this.close(e);var n=Object.assign({},e,{name:e.name,type:e.window_type,data:e.data,config:e.config,w:e.w,h:e.h,fullscreen:e.fullscreen,standalone:!0});this.$nextTick((function(){t.$emit("create",n)}))},close:function(e){this.hide(e);var t=this.active_windows.indexOf(e);t>=0&&(this.active_windows[t].selected=!1,this.active_windows[t].refresh(),this.active_windows.splice(t,1),this.wm.active_windows=this.active_windows,this.$emit("select",this.active_windows,null)),e.close(),this.$emit("close",e)},isTypedArray:function(e){return!!e&&void 0!==e.byteLength},hide:function(e){e.hidden=!0,e.__h=e.h,e.__w=e.w,e.w=0,e.h=0},fullScreen:function(e){e.fullscreen=!0,this.colNum=parseInt(this.$refs.gridwindow.clientWidth/this.columnWidth);var t=parseInt((this.$refs.gridwindow.clientHeight-76)/this.rowHeight),n=parseInt(this.$refs.gridwindow.clientWidth/this.columnWidth)+1;e._h=e.h,e._w=e.w,e.h=t,e.w=n,this.$refs.window_grid.layoutUpdate(),setTimeout((function(){e.resize(),e.refresh(),e.focus()}),500)},normalSize:function(e){this.colNum=parseInt(this.$refs.gridwindow.clientWidth/this.columnWidth),e.fullscreen=!1,e.h=e._h||5,e.w=e._w||5,e._w=null,e._h=null,this.$refs.window_grid.layoutUpdate(),setTimeout((function(){e.resize(),e.refresh(),e.focus()}),500)},duplicate:function(e){this.$emit("create",{name:e.name+v(),type:e.window_type,data:e.data,config:e.config,w:e.w,h:e.h,fullscreen:e.fullscreen,standalone:e.standalone})},unselectWindows:function(e){if(e.target.classList.contains("vue-grid-layout")&&this.active_windows&&this.active_windows.length>0){for(var t=0;t<this.active_windows.length;t++)this.active_windows[t].selected=!1,this.active_windows[t].refresh();this.active_windows=[],this.wm.active_windows=this.active_windows,this.$emit("select",this.active_windows,null),this.$forceUpdate()}},selectWindow:function(e,t){if(this.isStandaloneWindow(e)||(this.wm.selected_window=null),e.selected=!0,e.refresh&&e.refresh(),this.active_windows.length<=0||this.active_windows[this.active_windows.length-1]!==e){if(!t.shiftKey)for(var n=0;n<this.active_windows.length;n++)this.active_windows[n].selected=!1,this.active_windows[n].refresh();t.shiftKey&&this.active_windows.length>0?this.active_windows.push(e):this.active_windows=[e],this.wm.active_windows=this.active_windows,this.$emit("select",this.active_windows,e)}else if(!t.shiftKey&&this.active_windows.length>1){for(var i=0;i<this.active_windows.length;i++)this.active_windows[i]!==e&&(this.active_windows[i].selected=!1),this.active_windows[i].refresh();this.active_windows=[e]}this.$forceUpdate()},viewChanging:function(){this.show_overlay=!0},focusWindow:function(e){this.show_overlay=!1,this.selectWindow(e,{}),window.dispatchEvent(new Event("resize"))},stopDragging:function(){var e=this;setTimeout((function(){e.show_overlay=!1,e.$forceUpdate()}),300)}}},wt=mt,vt=(n("aef3"),Object(s["a"])(wt,h,p,!1,null,"6a7e2005",null)),gt=vt.exports;o["default"].use(f["a"]);var _t=[{path:"/",redirect:{name:"App"}},{path:"/app",name:"App",component:gt},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],yt=new f["a"]({base:"/",routes:_t}),bt=yt,jt=n("2f62");o["default"].use(jt["a"]);var kt=new jt["a"].Store({state:{},actions:{},mutations:{}}),Ct=n("43f9"),$t=n.n(Ct),xt=(n("51de"),n("e094"),n("7be8")),Ot=n.n(xt);o["default"].component("grid-layout",Ot.a.GridLayout),o["default"].component("grid-item",Ot.a.GridItem),o["default"].config.productionTip=!1,o["default"].use($t.a),new o["default"]({router:bt,render:function(e){return e(d)},store:kt}).$mount("#app")},"5e28":function(e,t,n){},"77b0":function(e,t,n){"use strict";var i=n("3cf9"),o=n.n(i);o.a},7908:function(e,t,n){},"7aa9":function(e,t,n){},"82e1":function(e,t,n){"use strict";var i=n("b261"),o=n.n(i);o.a},"85ec":function(e,t,n){},"869f":function(e,t,n){"use strict";var i=n("b3d1"),o=n.n(i);o.a},a833:function(e,t,n){},a8fe:function(e,t,n){"use strict";var i=n("a833"),o=n.n(i);o.a},aef3:function(e,t,n){"use strict";var i=n("7aa9"),o=n.n(i);o.a},b1eb:function(e,t,n){},b261:function(e,t,n){},b3d1:function(e,t,n){},bb6d:function(e,t,n){},e213:function(e,t,n){"use strict";var i=n("5e28"),o=n.n(i);o.a},efc7:function(e,t,n){"use strict";var i=n("b1eb"),o=n.n(i);o.a},f77d:function(e,t,n){"use strict";var i=n("3c99"),o=n.n(i);o.a},fecf:function(e,t,n){"use strict";var i=n("7908"),o=n.n(i);o.a}});
//# sourceMappingURL=app.274c5712.js.map